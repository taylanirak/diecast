# TARODAN - Mimari Åemalar ve Diyagramlar

> **Versiyon:** 1.0.0  
> **Son GÃ¼ncelleme:** Ocak 2024

Bu dokÃ¼man Tarodan projesinin tÃ¼m mimari ÅŸemalarÄ±nÄ±, diyagramlarÄ±nÄ± ve gÃ¶rsel yapÄ±larÄ±nÄ± iÃ§erir.

---

## ğŸ“‹ Ä°Ã§indekiler

1. [YÃ¼ksek Seviye Mimari](#1-yÃ¼ksek-seviye-mimari)
2. [Monorepo KlasÃ¶r YapÄ±sÄ±](#2-monorepo-klasÃ¶r-yapÄ±sÄ±)
3. [Veri AkÄ±ÅŸ DiyagramlarÄ±](#3-veri-akÄ±ÅŸ-diyagramlarÄ±)
4. [Database ÅemasÄ±](#4-database-ÅŸemasÄ±)
5. [Network ve Infrastructure](#5-network-ve-infrastructure)
6. [CI/CD Pipeline](#6-cicd-pipeline)
7. [Admin Panel YapÄ±sÄ±](#7-admin-panel-yapÄ±sÄ±)
8. [Deployment YapÄ±sÄ±](#8-deployment-yapÄ±sÄ±)

---

## 1. YÃœKSEK SEVÄ°YE MÄ°MARÄ°

### 1.1 Genel Sistem Mimarisi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    TARODAN MARKETPLACE                                           â”‚
â”‚                         Koleksiyoner Oyuncak AlÄ±m-SatÄ±m Platformu                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     CLIENT LAYER                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ WEB APPLICATION  â”‚     â”‚MOBILE APPLICATIONâ”‚     â”‚  ADMIN PANEL         â”‚                â”‚
â”‚   â”‚   (Next.js 14)   â”‚     â”‚ (React Native)   â”‚     â”‚   (Next.js 14)       â”‚                â”‚
â”‚   â”‚                  â”‚     â”‚                  â”‚     â”‚                      â”‚                â”‚
â”‚   â”‚ â€¢ App Router     â”‚     â”‚ â€¢ Expo Router    â”‚     â”‚ â€¢ App Router         â”‚                â”‚
â”‚   â”‚ â€¢ Tailwind CSS   â”‚     â”‚ â€¢ React Nav      â”‚     â”‚ â€¢ Shadcn/ui          â”‚                â”‚
â”‚   â”‚ â€¢ SEO Optimized  â”‚     â”‚ â€¢ Native Feat.   â”‚     â”‚ â€¢ Charts (Recharts)  â”‚                â”‚
â”‚   â”‚ â€¢ Public Access  â”‚     â”‚ â€¢ Push Notifs    â”‚     â”‚ â€¢ Analytics          â”‚                â”‚
â”‚   â”‚                  â”‚     â”‚                  â”‚     â”‚ â€¢ Auth Required      â”‚                â”‚
â”‚   â”‚ tarodan.com      â”‚     â”‚ iOS + Android    â”‚     â”‚ admin.tarodan.com    â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚            â”‚                        â”‚                          â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                        â”‚                          â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  INFRASTRUCTURE LAYER                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                              COOLIFY (Self-Hosted PaaS)                                  â”‚  â”‚
â”‚   â”‚                            https://coolify.tarodan.com                                   â”‚  â”‚
â”‚   â”‚                                                                                          â”‚  â”‚
â”‚   â”‚  â€¢ Git Integration        â€¢ Auto Deploy         â€¢ SSL Management                        â”‚  â”‚
â”‚   â”‚  â€¢ Zero-Downtime Deploy   â€¢ Rollback            â€¢ Environment Variables                 â”‚  â”‚
â”‚   â”‚  â€¢ Health Checks          â€¢ Logs Aggregation    â€¢ Team Management                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                           TRAEFIK (Reverse Proxy + Load Balancer)                        â”‚  â”‚
â”‚   â”‚  â€¢ Auto SSL (Let's Encrypt)  â€¢ HTTP â†’ HTTPS Redirect  â€¢ Rate Limiting                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚                      â”‚
                    â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   APPLICATION LAYER                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  NEXT.JS WEB â”‚    â”‚  NEXT.JS     â”‚    â”‚  NESTJS API  â”‚    â”‚BULLMQ WORKERSâ”‚                 â”‚
â”‚  â”‚    :3000     â”‚    â”‚  ADMIN       â”‚    â”‚    :3001     â”‚    â”‚              â”‚                 â”‚
â”‚  â”‚              â”‚    â”‚    :3002     â”‚    â”‚              â”‚    â”‚              â”‚                 â”‚
â”‚  â”‚ â€¢ SSR/SSG    â”‚    â”‚              â”‚    â”‚ â€¢ REST API   â”‚    â”‚ â€¢ Email      â”‚                 â”‚
â”‚  â”‚ â€¢ Public     â”‚    â”‚ â€¢ Dashboard  â”‚    â”‚ â€¢ GraphQL    â”‚    â”‚ â€¢ Push       â”‚                 â”‚
â”‚  â”‚ â€¢ SEO        â”‚    â”‚ â€¢ Reports    â”‚    â”‚ â€¢ WebSockets â”‚    â”‚ â€¢ Image      â”‚                 â”‚
â”‚  â”‚              â”‚    â”‚ â€¢ Settings   â”‚    â”‚ â€¢ Webhooks   â”‚    â”‚ â€¢ Payment    â”‚                 â”‚
â”‚  â”‚              â”‚    â”‚ â€¢ Charts     â”‚    â”‚ â€¢ Admin API  â”‚    â”‚ â€¢ Shipping   â”‚                 â”‚
â”‚  â”‚              â”‚    â”‚ â€¢ Auth Req   â”‚    â”‚              â”‚    â”‚ â€¢ Search     â”‚                 â”‚
â”‚  â”‚ Replicas: 2  â”‚    â”‚ Replicas: 1  â”‚    â”‚ Replicas: 2  â”‚    â”‚ Replicas: 2  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                  â”‚                   â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                              â”‚                   â”‚                     â”‚
                    â–¼                              â–¼                   â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    DATA LAYER                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ PostgreSQL   â”‚   â”‚    Redis     â”‚   â”‚Elasticsearch â”‚   â”‚    MinIO     â”‚                    â”‚
â”‚  â”‚   :5432      â”‚   â”‚    :6379     â”‚   â”‚    :9200     â”‚   â”‚    :9000     â”‚                    â”‚
â”‚  â”‚              â”‚   â”‚              â”‚   â”‚              â”‚   â”‚              â”‚                    â”‚
â”‚  â”‚ â€¢ Users      â”‚   â”‚ â€¢ Sessions   â”‚   â”‚ â€¢ Product    â”‚   â”‚ â€¢ Images     â”‚                    â”‚
â”‚  â”‚ â€¢ Products   â”‚   â”‚ â€¢ Cache      â”‚   â”‚   Search     â”‚   â”‚ â€¢ Avatars    â”‚                    â”‚
â”‚  â”‚ â€¢ Orders     â”‚   â”‚ â€¢ Queue Jobs â”‚   â”‚ â€¢ Full-text  â”‚   â”‚ â€¢ Documents  â”‚                    â”‚
â”‚  â”‚ â€¢ Payments   â”‚   â”‚ â€¢ Pub/Sub    â”‚   â”‚ â€¢ Filters    â”‚   â”‚ â€¢ Reports    â”‚                    â”‚
â”‚  â”‚ â€¢ Shipments  â”‚   â”‚ â€¢ Rate Limit â”‚   â”‚ â€¢ Analytics  â”‚   â”‚              â”‚                    â”‚
â”‚  â”‚ â€¢ Analytics  â”‚   â”‚ â€¢ Admin Sess â”‚   â”‚              â”‚   â”‚ S3 Compatibleâ”‚                    â”‚
â”‚  â”‚              â”‚   â”‚              â”‚   â”‚              â”‚   â”‚              â”‚                    â”‚
â”‚  â”‚ 32GB RAM     â”‚   â”‚ 8GB RAM      â”‚   â”‚ 16GB RAM     â”‚   â”‚ 2TB Storage  â”‚                    â”‚
â”‚  â”‚ Backups:Dailyâ”‚   â”‚ Persist: AOF â”‚   â”‚ Replicas: 1  â”‚   â”‚ Replicas: 1  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MONITORING & OBSERVABILITY                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    PROMETHEUS        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚      GRAFANA         â”‚         â”‚    LOKI (Logs)       â”‚    â”‚
â”‚  â”‚     :9090            â”‚         â”‚       :3003          â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚                      â”‚         â”‚                      â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  â€¢ Metrics Collectionâ”‚         â”‚  â€¢ Dashboards        â”‚         â”‚  â€¢ Log Aggregation   â”‚    â”‚
â”‚  â”‚  â€¢ Alerting Rules    â”‚         â”‚  â€¢ Visualization     â”‚         â”‚  â€¢ Query Logs        â”‚    â”‚
â”‚  â”‚  â€¢ Time-Series DB    â”‚         â”‚  â€¢ Alerts            â”‚         â”‚  â€¢ Retention: 30d    â”‚    â”‚
â”‚  â”‚                      â”‚         â”‚                      â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  Scrape:             â”‚         â”‚  https://grafana     â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  - API metrics       â”‚         â”‚  .tarodan.com        â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  - PostgreSQL        â”‚         â”‚                      â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  - Redis             â”‚         â”‚                      â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  - Admin metrics     â”‚         â”‚                      â”‚         â”‚                      â”‚    â”‚
â”‚  â”‚  - System metrics    â”‚         â”‚                      â”‚         â”‚                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              EXTERNAL SERVICES & INTEGRATIONS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   iyzico     â”‚   â”‚  Aras Kargo  â”‚   â”‚   SendGrid   â”‚   â”‚  Expo Push   â”‚                    â”‚
â”‚  â”‚              â”‚   â”‚              â”‚   â”‚              â”‚   â”‚              â”‚                    â”‚
â”‚  â”‚ â€¢ 3D Secure  â”‚   â”‚ â€¢ Label Gen  â”‚   â”‚ â€¢ Transact.  â”‚   â”‚ â€¢ Push Notif â”‚                    â”‚
â”‚  â”‚ â€¢ Payment    â”‚   â”‚ â€¢ Tracking   â”‚   â”‚   Emails     â”‚   â”‚ â€¢ Badge      â”‚                    â”‚
â”‚  â”‚ â€¢ Refund     â”‚   â”‚ â€¢ Webhooks   â”‚   â”‚ â€¢ Templates  â”‚   â”‚ â€¢ Deep Links â”‚                    â”‚
â”‚  â”‚ â€¢ Escrow     â”‚   â”‚              â”‚   â”‚              â”‚   â”‚              â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚  Cloudflare  â”‚   â”‚    GitHub    â”‚   â”‚    Sentry    â”‚                                       â”‚
â”‚  â”‚              â”‚   â”‚              â”‚   â”‚              â”‚                                       â”‚
â”‚  â”‚ â€¢ DNS        â”‚   â”‚ â€¢ Code Repo  â”‚   â”‚ â€¢ Error Trackâ”‚                                       â”‚
â”‚  â”‚ â€¢ CDN        â”‚   â”‚ â€¢ CI/CD      â”‚   â”‚ â€¢ Performanceâ”‚                                       â”‚
â”‚  â”‚ â€¢ DDoS       â”‚   â”‚ â€¢ Actions    â”‚   â”‚ â€¢ Monitoring â”‚                                       â”‚
â”‚  â”‚ â€¢ WAF        â”‚   â”‚              â”‚   â”‚              â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Basit Sistem DiyagramÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web App   â”‚   â”‚ Mobile App  â”‚   â”‚ Admin Panel â”‚
â”‚  (Next.js)  â”‚   â”‚   (Expo)    â”‚   â”‚  (Next.js)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   API Gateway   â”‚
                â”‚    (NestJS)     â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Postgresâ”‚      â”‚ Redis  â”‚      â”‚ElasticSâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. MONOREPO KLASÃ–R YAPISI

### 2.1 DetaylÄ± KlasÃ¶r AÄŸacÄ±

```
tarodan/
â”‚
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                      âš›ï¸ Next.js 14 (Public Web)
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ (marketing)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # Landing
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ about/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ how-it-works/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ (shop)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # Product list
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx      # Product detail
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ category/[slug]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ checkout/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ (account)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ favorites/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ offers/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductCard.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductGrid.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductDetail.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ui/
â”‚   â”‚   â”‚       â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚       â””â”€â”€ Card.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”‚   â””â”€â”€ globals.css
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ next.config.js
â”‚   â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ mobile/                   ğŸ“± React Native + Expo
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ (tabs)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx             # Home
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sell.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ notifications.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ profile.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id].tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â”‚   â”œâ”€â”€ checkout/
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â””â”€â”€ _layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ product/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductCard.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProductList.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductDetail.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Card.tsx
â”‚   â”‚   â”‚   â””â”€â”€ navigation/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.json
â”‚   â”‚   â”œâ”€â”€ eas.json
â”‚   â”‚   â”œâ”€â”€ expo-env.d.ts
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ admin/                    ğŸ” Next.js 14 (Admin Panel)
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # Dashboard homepage
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # DetaylÄ± analizler
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sales/            # SatÄ±ÅŸ raporlarÄ±
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ revenue/          # Gelir raporlarÄ±
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ users/            # KullanÄ±cÄ± analitiÄŸi
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # TÃ¼m sipariÅŸler
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/             # SipariÅŸ detay
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ disputes/         # Ä°tirazlÄ± sipariÅŸler
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # KullanÄ±cÄ± listesi
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/             # KullanÄ±cÄ± detay
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sellers/          # SatÄ±cÄ±lar
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ suspended/        # Ban'lÄ± kullanÄ±cÄ±lar
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # ÃœrÃ¼n listesi
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/             # ÃœrÃ¼n detay/dÃ¼zenle
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pending/          # Onay bekleyenler
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ reported/         # Åikayet edilenler
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ general/          # Genel ayarlar
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ commission/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # Komisyon oranlarÄ±
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ payment/          # Ã–deme ayarlarÄ±
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ shipping/         # Kargo ayarlarÄ±
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notifications/    # Bildirim ÅŸablonlarÄ±
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx            # Dashboard layout
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ (auth)/
â”‚   â”‚   â”‚       â”œâ”€â”€ login/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ page.tsx          # Admin login
â”‚   â”‚   â”‚       â””â”€â”€ layout.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ charts/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SalesChart.tsx        # SatÄ±ÅŸ grafikleri (Recharts)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RevenueChart.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserGrowthChart.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CommissionChart.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ tables/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrdersTable.tsx       # TanStack Table
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UsersTable.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductsTable.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StatsCard.tsx         # Ä°statistik kartlarÄ±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RecentOrders.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ QuickActions.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚       â””â”€â”€ Breadcrumb.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ admin-api.ts              # Admin API client
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts                   # Admin auth
â”‚   â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middleware.ts                 # Auth middleware
â”‚   â”‚   â”œâ”€â”€ next.config.js
â”‚   â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ api/                      ğŸ–¥ï¸ NestJS Backend
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ modules/
â”‚       â”‚   â”‚   â”œâ”€â”€ auth/                 # Authentication
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ strategies/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ guards/
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â”œâ”€â”€ user/                 # User management
â”‚       â”‚   â”‚   â”œâ”€â”€ product/              # Product catalog
â”‚       â”‚   â”‚   â”œâ”€â”€ offer/                # Offer system
â”‚       â”‚   â”‚   â”œâ”€â”€ order/                # Order processing
â”‚       â”‚   â”‚   â”œâ”€â”€ payment/              # Payment integration
â”‚       â”‚   â”‚   â”œâ”€â”€ shipping/             # Cargo management
â”‚       â”‚   â”‚   â”œâ”€â”€ swap/                 # Swap/trade
â”‚       â”‚   â”‚   â”œâ”€â”€ notification/         # Notifications
â”‚       â”‚   â”‚   â”œâ”€â”€ search/               # Elasticsearch
â”‚       â”‚   â”‚   â”œâ”€â”€ media/                # MinIO integration
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â”€ admin/                # ğŸ” Admin Module
â”‚       â”‚   â”‚       â”œâ”€â”€ admin.module.ts
â”‚       â”‚   â”‚       â”œâ”€â”€ admin.controller.ts
â”‚       â”‚   â”‚       â”œâ”€â”€ admin.service.ts
â”‚       â”‚   â”‚       â”‚
â”‚       â”‚   â”‚       â”œâ”€â”€ analytics/
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ analytics.controller.ts
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ analytics.service.ts
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ dto/
â”‚       â”‚   â”‚       â”‚
â”‚       â”‚   â”‚       â”œâ”€â”€ commission/
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ commission.controller.ts
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ commission.service.ts
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ entities/
â”‚       â”‚   â”‚       â”‚
â”‚       â”‚   â”‚       â”œâ”€â”€ reports/
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ reports.controller.ts
â”‚       â”‚   â”‚       â”‚   â”œâ”€â”€ reports.service.ts
â”‚       â”‚   â”‚       â”‚   â””â”€â”€ generators/
â”‚       â”‚   â”‚       â”‚
â”‚       â”‚   â”‚       â””â”€â”€ settings/
â”‚       â”‚   â”‚           â”œâ”€â”€ settings.controller.ts
â”‚       â”‚   â”‚           â””â”€â”€ settings.service.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ workers/                  # Background jobs
â”‚       â”‚   â”‚   â”œâ”€â”€ email.worker.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ push.worker.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ image.worker.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ payment.worker.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ shipping.worker.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ search.worker.ts
â”‚       â”‚   â”‚   â””â”€â”€ analytics.worker.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ shared/
â”‚       â”‚   â”‚   â”œâ”€â”€ guards/
â”‚       â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚       â”‚   â”‚   â”œâ”€â”€ filters/
â”‚       â”‚   â”‚   â””â”€â”€ decorators/
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ main.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ prisma/
â”‚       â”‚   â”œâ”€â”€ schema.prisma
â”‚       â”‚   â””â”€â”€ migrations/
â”‚       â”‚
â”‚       â”œâ”€â”€ test/
â”‚       â”œâ”€â”€ Dockerfile
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ types/                            # Shared types
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ user.ts
â”‚   â”‚       â”œâ”€â”€ product.ts
â”‚   â”‚       â”œâ”€â”€ order.ts
â”‚   â”‚       â”œâ”€â”€ admin.ts
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ api-client/                       # API client
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ client.ts
â”‚   â”‚       â”œâ”€â”€ hooks/
â”‚   â”‚       â”œâ”€â”€ admin-client.ts
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                             # Business logic
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ hooks/
â”‚   â”‚       â”œâ”€â”€ stores/
â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                               # Shared components
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ Button.tsx
â”‚   â”‚       â”œâ”€â”€ Input.tsx
â”‚   â”‚       â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ validators/                       # Validation schemas
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ schemas/
â”‚
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ docker-compose.prod.yml
â”‚   â””â”€â”€ config/
â”‚       â”œâ”€â”€ prometheus.yml
â”‚       â”œâ”€â”€ grafana/
â”‚       â”œâ”€â”€ nginx/
â”‚       â””â”€â”€ loki/
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup-server.sh
â”‚   â”œâ”€â”€ backup.sh
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â””â”€â”€ seed-admin.ts
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml
â”‚       â””â”€â”€ deploy.yml
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ PROJECT.md
â”‚   â”œâ”€â”€ SCHEMA.md                         # This file
â”‚   â”œâ”€â”€ API.md
â”‚   â””â”€â”€ ADMIN.md
â”‚
â”œâ”€â”€ turbo.json
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

### 2.2 ModÃ¼l BaÄŸÄ±mlÄ±lÄ±klarÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PACKAGE DEPENDENCIES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  apps/web                                                    â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/types                             â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/api-client                        â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/core                              â”‚
â”‚  â””â”€â”€ depends on: @tarodan/ui                                â”‚
â”‚                                                              â”‚
â”‚  apps/mobile                                                 â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/types                             â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/api-client                        â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/core                              â”‚
â”‚  â””â”€â”€ depends on: @tarodan/ui                                â”‚
â”‚                                                              â”‚
â”‚  apps/admin                                                  â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/types                             â”‚
â”‚  â”œâ”€â”€ depends on: @tarodan/api-client                        â”‚
â”‚  â””â”€â”€ depends on: @tarodan/core                              â”‚
â”‚                                                              â”‚
â”‚  apps/api                                                    â”‚
â”‚  â””â”€â”€ depends on: @tarodan/types                             â”‚
â”‚                                                              â”‚
â”‚  packages/api-client                                         â”‚
â”‚  â””â”€â”€ depends on: @tarodan/types                             â”‚
â”‚                                                              â”‚
â”‚  packages/core                                               â”‚
â”‚  â””â”€â”€ depends on: @tarodan/types                             â”‚
â”‚                                                              â”‚
â”‚  packages/ui                                                 â”‚
â”‚  â””â”€â”€ independent (base UI components)                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. VERÄ° AKIÅ DÄ°YAGRAMLARI

### 3.1 ÃœrÃ¼n SatÄ±n Alma AkÄ±ÅŸÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ÃœRÃœN SATIN ALMA Ä°ÅLEM AKIÅI                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User (Web/Mobile)
      â”‚
      â”‚ 1. "SatÄ±n Al" butonuna tÄ±klar
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚
â”‚  (Next.js/RN)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. POST /orders
         â”‚    {productId, addressId}
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API GATEWAY                           â”‚
â”‚                      (NestJS - :3001)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 3. Auth middleware validates JWT
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ORDER MODULE                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ OrderService.create()                                  â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚ BEGIN TRANSACTION;                                     â”‚  â”‚
â”‚  â”‚   â€¢ Lock product (FOR UPDATE)                         â”‚  â”‚
â”‚  â”‚   â€¢ Validate stock & status                           â”‚  â”‚
â”‚  â”‚   â€¢ Calculate totals                                  â”‚  â”‚
â”‚  â”‚   â€¢ Create order record                               â”‚  â”‚
â”‚  â”‚   â€¢ Reserve product (status='reserved')               â”‚  â”‚
â”‚  â”‚ COMMIT;                                                â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚ Event: order.created                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 4. Return {orderId, paymentUrl}
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAYMENT MODULE                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PaymentService.initiate()                              â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚ â†’ Call iyzico API                                     â”‚  â”‚
â”‚  â”‚ â†’ Create checkout form                                â”‚  â”‚
â”‚  â”‚ â†’ Return payment URL                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 5. Redirect to iyzico
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iyzico 3D Sec  â”‚ â† User completes payment
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 6. Webhook: POST /webhooks/iyzico
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PAYMENT WEBHOOK HANDLER                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ BEGIN TRANSACTION;                                     â”‚  â”‚
â”‚  â”‚   â€¢ Verify webhook signature                          â”‚  â”‚
â”‚  â”‚   â€¢ Update payment status                             â”‚  â”‚
â”‚  â”‚   â€¢ Update order (status='paid')                      â”‚  â”‚
â”‚  â”‚   â€¢ Create payment_hold (escrow)                      â”‚  â”‚
â”‚  â”‚   â€¢ Update product (status='sold')                    â”‚  â”‚
â”‚  â”‚ COMMIT;                                                â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚ Event: order.paid                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 7. Publish to queues
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BULLMQ (Redis Queue)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ email.queue â”‚  â”‚ push.queue  â”‚  â”‚shipping.queueâ”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚EmailWorker   â”‚  â”‚ PushWorker   â”‚  â”‚ShippingWorkerâ”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚â†’ SendGrid    â”‚  â”‚â†’ Expo Push   â”‚  â”‚â†’ Aras Kargo  â”‚
â”‚  "Order      â”‚  â”‚  "SipariÅŸ    â”‚  â”‚  Create labelâ”‚
â”‚   confirmed" â”‚  â”‚   onaylandÄ±" â”‚  â”‚  GET barcode â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  Database    â”‚
                                    â”‚  shipments   â”‚
                                    â”‚  table       â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Teklif Verme & Kabul AkÄ±ÅŸÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TEKLÄ°F VERME & KABUL AKIÅI                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Buyer   â”‚                                                    â”‚  Seller   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚                                                                â”‚
      â”‚ 1. POST /offers                                                â”‚
      â”‚ {productId, amount: 180}                                       â”‚
      â–¼                                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          OFFER MODULE                                      â”‚
â”‚                                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ OfferService.create()                                               â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚ VALIDATIONS:                                                        â”‚  â”‚
â”‚   â”‚ â”œâ”€â”€ ÃœrÃ¼n active mi?                                                â”‚  â”‚
â”‚   â”‚ â”œâ”€â”€ Kendi Ã¼rÃ¼nÃ¼ne teklif mi? â†’ ERROR                               â”‚  â”‚
â”‚   â”‚ â”œâ”€â”€ AynÄ± Ã¼rÃ¼ne bekleyen teklifi var mÄ±? â†’ ERROR                    â”‚  â”‚
â”‚   â”‚ â””â”€â”€ Teklif fiyatÄ± mantÄ±klÄ± mÄ±? (min %50?)                          â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚ RACE CONDITION PREVENTION:                                         â”‚  â”‚
â”‚   â”‚ SELECT * FROM products WHERE id = $1 FOR UPDATE SKIP LOCKED        â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚ INSERT INTO offers (...)                                           â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚ EVENT: offer.created                                               â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         NOTIFICATION WORKER          â”‚
              â”‚  â†’ Push: "Yeni teklif: 180 TL"      â”‚
              â”‚  â†’ Email: "ÃœrÃ¼nÃ¼nÃ¼ze teklif geldi"  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Seller     â”‚â—„â”€â”€â”€ Teklifi gÃ¶rÃ¼r
                          â”‚   gÃ¶rÃ¼yor    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                               â”‚
         â–¼                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   KABUL ET          â”‚                      â”‚    REDDET           â”‚
â”‚   POST /offers/:id  â”‚                      â”‚    POST /offers/:id â”‚
â”‚   /accept           â”‚                      â”‚    /reject          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                            â”‚
          â–¼                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OFFER ACCEPT LOGIC                               â”‚
â”‚                                                                          â”‚
â”‚   BEGIN;                                                                 â”‚
â”‚     -- 1. Lock offer with version check                                 â”‚
â”‚     SELECT * FROM offers WHERE id = $1 FOR UPDATE;                      â”‚
â”‚                                                                          â”‚
â”‚     -- 2. Lock product                                                  â”‚
â”‚     SELECT * FROM products WHERE id = $product_id FOR UPDATE;           â”‚
â”‚                                                                          â”‚
â”‚     -- 3. Reject other pending offers                                   â”‚
â”‚     UPDATE offers SET status = 'rejected'                               â”‚
â”‚     WHERE product_id = $product_id AND status = 'pending';              â”‚
â”‚                                                                          â”‚
â”‚     -- 4. Accept this offer                                             â”‚
â”‚     UPDATE offers SET status = 'accepted' WHERE id = $offer_id;         â”‚
â”‚                                                                          â”‚
â”‚     -- 5. Reserve product                                               â”‚
â”‚     UPDATE products SET status = 'reserved';                            â”‚
â”‚                                                                          â”‚
â”‚     -- 6. Create pending order                                          â”‚
â”‚     INSERT INTO orders (...);                                           â”‚
â”‚                                                                          â”‚
â”‚   COMMIT;                                                                â”‚
â”‚                                                                          â”‚
â”‚   EVENT: offer.accepted                                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      ORDER CREATED             â”‚
                    â”‚      status: pending_payment   â”‚
                    â”‚                                â”‚
                    â”‚      â†’ Buyer'a push: "Teklif  â”‚
                    â”‚        kabul, Ã¶deme bekleniyor"â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Admin Komisyon Hesaplama

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ADMIN KOMÄ°SYON HESAPLAMA                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    OrderService.calculateCommission(order)
                                   â”‚
                                   â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Fetch Active Commission Rules â”‚
                    â”‚  FROM commission_rules         â”‚
                    â”‚  WHERE is_active = true        â”‚
                    â”‚  ORDER BY priority DESC        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Find Matching Rule:           â”‚
                    â”‚                                â”‚
                    â”‚  1. Exact match?               â”‚
                    â”‚     category_id + seller_type  â”‚
                    â”‚     â†“ YES â†’ Use this rule      â”‚
                    â”‚                                â”‚
                    â”‚  2. Category match?            â”‚
                    â”‚     category_id only           â”‚
                    â”‚     â†“ YES â†’ Use this rule      â”‚
                    â”‚                                â”‚
                    â”‚  3. Seller type match?         â”‚
                    â”‚     seller_type only           â”‚
                    â”‚     â†“ YES â†’ Use this rule      â”‚
                    â”‚                                â”‚
                    â”‚  4. Default rule               â”‚
                    â”‚     rule_type = 'default'      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Calculate Commission:         â”‚
                    â”‚                                â”‚
                    â”‚  commission = order.total_amountâ”‚
                    â”‚              Ã— rule.rate       â”‚
                    â”‚                                â”‚
                    â”‚  Apply limits:                 â”‚
                    â”‚  if commission < min â†’ min     â”‚
                    â”‚  if commission > max â†’ max     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Store Commission:             â”‚
                    â”‚                                â”‚
                    â”‚  UPDATE orders                 â”‚
                    â”‚  SET commission_amount = X     â”‚
                    â”‚  WHERE id = $order_id          â”‚
                    â”‚                                â”‚
                    â”‚  INSERT INTO analytics_snapshotsâ”‚
                    â”‚  (commission data)             â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã–rnek:
â”€â”€â”€â”€â”€
Order: 250 TL
Category: "Action Figures"
Seller: "verified"

Rules:
1. Priority 10: Category "Action Figures" + Seller "verified" â†’ %4
2. Priority 5:  Category "Action Figures" â†’ %6
3. Priority 0:  Default â†’ %5

Result: %4 komisyon uygulanÄ±r (250 Ã— 0.04 = 10 TL)
```

---

## 4. DATABASE ÅEMASI

### 4.1 Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATABASE SCHEMA (PostgreSQL)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users     â”‚     â”‚  products   â”‚     â”‚   offers    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚â—„â”€â”€â”€â”€â”‚ seller_id   â”‚     â”‚ id (PK)     â”‚
â”‚ email       â”‚     â”‚ category_id â”‚â”€â”€â”€â”€â–¶â”‚ product_id  â”‚
â”‚ phone       â”‚     â”‚ title       â”‚     â”‚ buyer_id    â”‚â”€â”€â”
â”‚ password    â”‚     â”‚ description â”‚     â”‚ seller_id   â”‚  â”‚
â”‚ is_verified â”‚     â”‚ price       â”‚     â”‚ amount      â”‚  â”‚
â”‚ is_seller   â”‚     â”‚ condition   â”‚     â”‚ status      â”‚  â”‚
â”‚ created_at  â”‚     â”‚ status      â”‚     â”‚ expires_at  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ created_at  â”‚     â”‚ version     â”‚  â”‚
       â”‚            â”‚ version     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
       â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚         â”‚
       â”‚                   â”‚                   â”‚         â”‚
       â”‚                   â”‚                   â”‚         â”‚
       â–¼                   â–¼                   â–¼         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  addresses  â”‚     â”‚prod_images  â”‚     â”‚   orders    â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚ â”‚
â”‚ user_id     â”‚     â”‚ product_id  â”‚     â”‚ order_numberâ”‚ â”‚
â”‚ city        â”‚     â”‚ url         â”‚     â”‚ buyer_id    â”‚â—„â”˜
â”‚ district    â”‚     â”‚ sort_order  â”‚     â”‚ seller_id   â”‚
â”‚ address     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ product_id  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ offer_id    â”‚
                                        â”‚ total_amountâ”‚
                                        â”‚ commission  â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ status      â”‚
       â”‚                                â”‚ created_at  â”‚
       â”‚                                â”‚ version     â”‚
       â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                       â”‚
       â”‚                                       â”‚
       â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  payments   â”‚                        â”‚  shipments  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚                        â”‚ id (PK)     â”‚
â”‚ order_id    â”‚                        â”‚ order_id    â”‚
â”‚ provider    â”‚                        â”‚ carrier     â”‚
â”‚ amount      â”‚                        â”‚ tracking_no â”‚
â”‚ status      â”‚                        â”‚ status      â”‚
â”‚ ext_ref     â”‚                        â”‚ created_at  â”‚
â”‚ created_at  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
       â”‚                                      â–¼
       â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                              â”‚ship_events  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚payment_holdsâ”‚                       â”‚ id (PK)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚ shipment_id â”‚
â”‚ id (PK)     â”‚                       â”‚ status      â”‚
â”‚ payment_id  â”‚                       â”‚ description â”‚
â”‚ seller_id   â”‚                       â”‚ event_time  â”‚
â”‚ amount      â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ status      â”‚
â”‚ held_until  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚admin_users  â”‚     â”‚commission_  â”‚     â”‚ audit_logs  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚   rules     â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚ id (PK)     â”‚
â”‚ user_id     â”‚     â”‚ id (PK)     â”‚     â”‚ admin_id    â”‚
â”‚ role        â”‚     â”‚ rule_type   â”‚     â”‚ action      â”‚
â”‚ permissions â”‚     â”‚ category_id â”‚     â”‚ entity_type â”‚
â”‚ is_active   â”‚     â”‚ seller_type â”‚     â”‚ entity_id   â”‚
â”‚ created_by  â”‚     â”‚ rate        â”‚     â”‚ changes     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ priority    â”‚     â”‚ ip_address  â”‚
                    â”‚ is_active   â”‚     â”‚ created_at  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚platform_    â”‚     â”‚analytics_   â”‚
â”‚ settings    â”‚     â”‚ snapshots   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚
â”‚ key         â”‚     â”‚ type        â”‚
â”‚ value       â”‚     â”‚ date        â”‚
â”‚ type        â”‚     â”‚ data (JSONB)â”‚
â”‚ updated_by  â”‚     â”‚ created_at  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Temel Tablolar ve Ä°liÅŸkiler

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TABLE RELATIONSHIPS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) products                     â”‚
â”‚    â””â”€â”€ is_seller = true                                     â”‚
â”‚                                                              â”‚
â”‚  products (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) product_images              â”‚
â”‚                                                              â”‚
â”‚  products (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) offers                      â”‚
â”‚  users (buyer) (1) â”€â”€â”€â”€â”€â”€â”€â–¶ (N) offers                      â”‚
â”‚                                                              â”‚
â”‚  offers (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (1) orders (optional)          â”‚
â”‚  products (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) orders                     â”‚
â”‚  users (buyer) (1) â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) orders                     â”‚
â”‚  users (seller) (1) â”€â”€â”€â”€â”€â”€â”€â–¶ (N) orders                     â”‚
â”‚                                                              â”‚
â”‚  orders (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (1) payments                   â”‚
â”‚  payments (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (1) payment_holds              â”‚
â”‚                                                              â”‚
â”‚  orders (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (1) shipments                  â”‚
â”‚  shipments (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) shipment_events            â”‚
â”‚                                                              â”‚
â”‚  users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (1) admin_users (optional)     â”‚
â”‚  admin_users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (N) audit_logs                 â”‚
â”‚                                                              â”‚
â”‚  commission_rules (N) â”€â”€â”€â”€â”€â–¶ (1) categories (optional)      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. NETWORK VE INFRASTRUCTURE

### 5.1 Network DiyagramÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      INTERNET                                â”‚
â”‚                         â”‚                                    â”‚
â”‚                         â–¼                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚   Cloudflare         â”‚                        â”‚
â”‚              â”‚   â€¢ DNS              â”‚                        â”‚
â”‚              â”‚   â€¢ CDN              â”‚                        â”‚
â”‚              â”‚   â€¢ DDoS Protection  â”‚                        â”‚
â”‚              â”‚   â€¢ WAF              â”‚                        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                         â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVER (Public IP)                         â”‚
â”‚                   Ubuntu 22.04 LTS                           â”‚
â”‚                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚              UFW FIREWALL                            â”‚  â”‚
â”‚   â”‚   â€¢ Port 22  (SSH - Key only)                        â”‚  â”‚
â”‚   â”‚   â€¢ Port 80  (HTTP - Redirect to 443)                â”‚  â”‚
â”‚   â”‚   â€¢ Port 443 (HTTPS)                                 â”‚  â”‚
â”‚   â”‚   â€¢ All other ports: BLOCKED                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                   TRAEFIK                            â”‚  â”‚
â”‚   â”‚                :80, :443                             â”‚  â”‚
â”‚   â”‚                                                      â”‚  â”‚
â”‚   â”‚  Routes:                                             â”‚  â”‚
â”‚   â”‚  â€¢ tarodan.com          â†’ web:3000                   â”‚  â”‚
â”‚   â”‚  â€¢ admin.tarodan.com    â†’ admin:3002                 â”‚  â”‚
â”‚   â”‚  â€¢ api.tarodan.com      â†’ api:3001                   â”‚  â”‚
â”‚   â”‚  â€¢ storage.tarodan.com  â†’ minio:9000                 â”‚  â”‚
â”‚   â”‚  â€¢ grafana.tarodan.com  â†’ grafana:3003               â”‚  â”‚
â”‚   â”‚                                                      â”‚  â”‚
â”‚   â”‚  SSL: Let's Encrypt (auto-renew)                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚          DOCKER NETWORK (tarodan-network)            â”‚  â”‚
â”‚   â”‚                   172.20.0.0/16                      â”‚  â”‚
â”‚   â”‚                                                      â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚   â”‚  â”‚ web  â”‚  â”‚admin â”‚  â”‚ api  â”‚  â”‚workerâ”‚            â”‚  â”‚
â”‚   â”‚  â”‚:3000 â”‚  â”‚:3002 â”‚  â”‚:3001 â”‚  â”‚      â”‚            â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜            â”‚  â”‚
â”‚   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚   â”‚                 â”‚         â”‚                          â”‚  â”‚
â”‚   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚   â”‚      â”‚          â”‚         â”‚        â”‚                â”‚  â”‚
â”‚   â”‚      â–¼          â–¼         â–¼        â–¼                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚   â”‚  â”‚postgresâ”‚ â”‚redis â”‚ â”‚elastic â”‚ â”‚minio â”‚           â”‚  â”‚
â”‚   â”‚  â”‚:5432   â”‚ â”‚:6379 â”‚ â”‚:9200   â”‚ â”‚:9000 â”‚           â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚   â”‚                                                      â”‚  â”‚
â”‚   â”‚  Internal DNS Resolution:                           â”‚  â”‚
â”‚   â”‚  postgres.tarodan-network â†’ 172.20.0.2              â”‚  â”‚
â”‚   â”‚  redis.tarodan-network    â†’ 172.20.0.3              â”‚  â”‚
â”‚   â”‚  etc.                                                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Docker Compose YapÄ±sÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DOCKER COMPOSE SERVICES                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  traefik                                                     â”‚
â”‚  â”œâ”€â”€ Port: 80, 443                                          â”‚
â”‚  â”œâ”€â”€ Volume: traefik-certificates                           â”‚
â”‚  â””â”€â”€ Network: tarodan-network                               â”‚
â”‚                                                              â”‚
â”‚  web (Next.js Public)                                       â”‚
â”‚  â”œâ”€â”€ Build: apps/web/Dockerfile                             â”‚
â”‚  â”œâ”€â”€ Port: 3000 (internal)                                  â”‚
â”‚  â”œâ”€â”€ Replicas: 2                                            â”‚
â”‚  â”œâ”€â”€ Env: NEXT_PUBLIC_API_URL                               â”‚
â”‚  â””â”€â”€ Labels: traefik.enable, tarodan.com                    â”‚
â”‚                                                              â”‚
â”‚  admin (Next.js Admin)                                      â”‚
â”‚  â”œâ”€â”€ Build: apps/admin/Dockerfile                           â”‚
â”‚  â”œâ”€â”€ Port: 3002 (internal)                                  â”‚
â”‚  â”œâ”€â”€ Replicas: 1                                            â”‚
â”‚  â””â”€â”€ Labels: traefik.enable, admin.tarodan.com              â”‚
â”‚                                                              â”‚
â”‚  api (NestJS)                                               â”‚
â”‚  â”œâ”€â”€ Build: apps/api/Dockerfile                             â”‚
â”‚  â”œâ”€â”€ Port: 3001 (internal)                                  â”‚
â”‚  â”œâ”€â”€ Replicas: 2                                            â”‚
â”‚  â”œâ”€â”€ Depends: postgres, redis, elasticsearch, minio         â”‚
â”‚  â””â”€â”€ Labels: traefik.enable, api.tarodan.com                â”‚
â”‚                                                              â”‚
â”‚  worker (BullMQ)                                            â”‚
â”‚  â”œâ”€â”€ Build: apps/api/Dockerfile                             â”‚
â”‚  â”œâ”€â”€ Command: node dist/workers/main.js                     â”‚
â”‚  â”œâ”€â”€ Replicas: 2                                            â”‚
â”‚  â””â”€â”€ Depends: redis, postgres, minio                        â”‚
â”‚                                                              â”‚
â”‚  postgres                                                    â”‚
â”‚  â”œâ”€â”€ Image: postgres:16-alpine                              â”‚
â”‚  â”œâ”€â”€ Port: 5432 (internal only)                             â”‚
â”‚  â”œâ”€â”€ Volume: postgres-data                                  â”‚
â”‚  â””â”€â”€ Resources: 2 CPU, 4GB RAM                              â”‚
â”‚                                                              â”‚
â”‚  redis                                                       â”‚
â”‚  â”œâ”€â”€ Image: redis:7-alpine                                  â”‚
â”‚  â”œâ”€â”€ Port: 6379 (internal only)                             â”‚
â”‚  â”œâ”€â”€ Volume: redis-data                                     â”‚
â”‚  â””â”€â”€ Command: redis-server --appendonly yes                 â”‚
â”‚                                                              â”‚
â”‚  elasticsearch                                               â”‚
â”‚  â”œâ”€â”€ Image: elasticsearch:8.12.0                            â”‚
â”‚  â”œâ”€â”€ Port: 9200 (internal only)                             â”‚
â”‚  â”œâ”€â”€ Volume: elasticsearch-data                             â”‚
â”‚  â””â”€â”€ Resources: 2 CPU, 2GB RAM                              â”‚
â”‚                                                              â”‚
â”‚  minio                                                       â”‚
â”‚  â”œâ”€â”€ Image: minio/minio:latest                              â”‚
â”‚  â”œâ”€â”€ Port: 9000 (S3 API), 9001 (Console)                    â”‚
â”‚  â”œâ”€â”€ Volume: minio-data                                     â”‚
â”‚  â””â”€â”€ Labels: storage.tarodan.com, minio.tarodan.com         â”‚
â”‚                                                              â”‚
â”‚  prometheus                                                  â”‚
â”‚  â”œâ”€â”€ Image: prom/prometheus:latest                          â”‚
â”‚  â”œâ”€â”€ Port: 9090 (internal)                                  â”‚
â”‚  â”œâ”€â”€ Volume: prometheus-data, config                        â”‚
â”‚  â””â”€â”€ Scrapes: api, postgres, redis                          â”‚
â”‚                                                              â”‚
â”‚  grafana                                                     â”‚
â”‚  â”œâ”€â”€ Image: grafana/grafana:latest                          â”‚
â”‚  â”œâ”€â”€ Port: 3003 (internal)                                  â”‚
â”‚  â”œâ”€â”€ Volume: grafana-data, dashboards                       â”‚
â”‚  â””â”€â”€ Labels: grafana.tarodan.com                            â”‚
â”‚                                                              â”‚
â”‚  loki                                                        â”‚
â”‚  â”œâ”€â”€ Image: grafana/loki:latest                             â”‚
â”‚  â”œâ”€â”€ Port: 3100 (internal)                                  â”‚
â”‚  â””â”€â”€ Volume: loki-data                                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. CI/CD PIPELINE

### 6.1 GitHub Actions Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CI/CD PIPELINE                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Developer                   GitHub                    GitHub Actions
     â”‚                          â”‚                              â”‚
     â”‚  1. git push main        â”‚                              â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                              â”‚
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚  2. Trigger workflow         â”‚
     â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚                              â”‚ 3. Checkout code
     â”‚                          â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚                              â”‚ 4. Run tests
     â”‚                          â”‚                              â”‚    â€¢ Lint
     â”‚                          â”‚                              â”‚    â€¢ Type check
     â”‚                          â”‚                              â”‚    â€¢ Unit tests
     â”‚                          â”‚                              â”‚    â€¢ E2E tests
     â”‚                          â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚                              â”‚ 5. Build images
     â”‚                          â”‚                              â”‚    â€¢ web
     â”‚                          â”‚                              â”‚    â€¢ admin
     â”‚                          â”‚                              â”‚    â€¢ api
     â”‚                          â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚                              â”‚ 6. Push to GHCR
     â”‚                          â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚                              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚                              â”‚ 7. Trigger Coolify
     â”‚                          â”‚                              â”‚
     â”‚                          â”‚                              â–¼
     â”‚                          â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                          â”‚                      â”‚    Coolify    â”‚
     â”‚                          â”‚                      â”‚               â”‚
     â”‚                          â”‚                      â”‚ 8. Pull imagesâ”‚
     â”‚                          â”‚                      â”‚ 9. Migrate DB â”‚
     â”‚                          â”‚                      â”‚ 10. Deploy    â”‚
     â”‚                          â”‚                      â”‚    (rolling)  â”‚
     â”‚                          â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                          â”‚                              â”‚
     â”‚   âœ… Notification        â”‚                              â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚   "Deploy successful!"                                  â”‚
     â”‚                                                          â”‚
```

### 6.2 Deployment Stages

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DEPLOYMENT STAGES                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Stage 1: Build & Test (GitHub Actions)                     â”‚
â”‚  â”œâ”€â”€ Checkout code                          ~30s            â”‚
â”‚  â”œâ”€â”€ Setup Node.js + pnpm                   ~20s            â”‚
â”‚  â”œâ”€â”€ Install dependencies (cached)          ~40s            â”‚
â”‚  â”œâ”€â”€ Lint all packages                      ~15s            â”‚
â”‚  â”œâ”€â”€ Type check                             ~20s            â”‚
â”‚  â”œâ”€â”€ Unit tests                             ~30s            â”‚
â”‚  â”œâ”€â”€ E2E tests (critical flows)             ~2m             â”‚
â”‚  â””â”€â”€ Build Docker images (parallel)         ~3m             â”‚
â”‚      Total: ~6-7 minutes                                    â”‚
â”‚                                                              â”‚
â”‚  Stage 2: Push Images (GitHub Actions)                      â”‚
â”‚  â”œâ”€â”€ Login to GHCR                          ~5s             â”‚
â”‚  â”œâ”€â”€ Tag images (sha + latest)              ~5s             â”‚
â”‚  â””â”€â”€ Push to registry (parallel)            ~2m             â”‚
â”‚      Total: ~2 minutes                                      â”‚
â”‚                                                              â”‚
â”‚  Stage 3: Deploy (Coolify)                                  â”‚
â”‚  â”œâ”€â”€ Receive webhook                        ~1s             â”‚
â”‚  â”œâ”€â”€ Pull new images                        ~1m             â”‚
â”‚  â”œâ”€â”€ Run database migrations                ~10s            â”‚
â”‚  â”œâ”€â”€ Start new containers (blue)            ~20s            â”‚
â”‚  â”œâ”€â”€ Health check wait                      ~30s            â”‚
â”‚  â”œâ”€â”€ Switch traffic (blue â†’ green)          ~5s             â”‚
â”‚  â””â”€â”€ Stop old containers                    ~10s            â”‚
â”‚      Total: ~2-3 minutes                                    â”‚
â”‚                                                              â”‚
â”‚  TOTAL DEPLOYMENT TIME: ~10-12 minutes                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ADMIN PANEL YAPISI

### 7.1 Admin Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ADMIN DASHBOARD LAYOUT                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Logo  Admin Panel                                    admin@tarodan.com  âš™  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         â”‚                                                                   â”‚
â”‚  ğŸ“Š     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ Dashboard  â”‚                                                             â”‚ â”‚
â”‚         â”‚  â”‚  Toplam SatÄ±ÅŸ    Komisyon      Aktif ÃœrÃ¼n   KullanÄ±cÄ±lar  â”‚ â”‚
â”‚  ğŸ“ˆ     â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ Analizler  â”‚  â”‚ 1,234    â”‚    â”‚ 12,345 â‚º â”‚  â”‚  5,678   â”‚ â”‚  3,456   â”‚  â”‚ â”‚
â”‚         â”‚  â”‚  â”‚ +12%     â”‚    â”‚ +8%      â”‚  â”‚  +5%     â”‚ â”‚  +15%    â”‚  â”‚ â”‚
â”‚  ğŸ“¦     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ SipariÅŸler â”‚                                                             â”‚ â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ğŸ‘¥     â”‚                                                                   â”‚
â”‚KullanÄ±cÄ±larâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚         â”‚  â”‚           SatÄ±ÅŸ Grafikleri (Son 30 GÃ¼n)              â”‚   â”‚
â”‚  ğŸ     â”‚  â”‚                                                       â”‚   â”‚
â”‚ ÃœrÃ¼nler â”‚  â”‚  â‚º                                                    â”‚   â”‚
â”‚         â”‚  â”‚  â”‚     â•±â•²                                             â”‚   â”‚
â”‚  ğŸ’°     â”‚  â”‚  â”‚   â•±    â•²        â•±â•²                                 â”‚   â”‚
â”‚ Komisyonâ”‚  â”‚  â”‚ â•±        â•²    â•±    â•²                               â”‚   â”‚
â”‚         â”‚  â”‚  â”‚â•±           â•²â•±        â•²                             â”‚   â”‚
â”‚  ğŸ“Š     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ Raporlarâ”‚                                                               â”‚
â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  âš™ï¸     â”‚  â”‚   Son SipariÅŸler     â”‚  â”‚  Bekleyen Ä°ÅŸlemler      â”‚    â”‚
â”‚ Ayarlar â”‚  â”‚                      â”‚  â”‚                         â”‚    â”‚
â”‚         â”‚  â”‚  #12345 - 250â‚º      â”‚  â”‚  ğŸ”´ 3 ÃœrÃ¼n Onay Bekliyorâ”‚    â”‚
â”‚         â”‚  â”‚  #12344 - 180â‚º      â”‚  â”‚  ğŸŸ¡ 5 Ä°ade Talebi       â”‚    â”‚
â”‚         â”‚  â”‚  #12343 - 420â‚º      â”‚  â”‚  ğŸŸ¢ 2 Kimlik DoÄŸrulama  â”‚    â”‚
â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Admin Module Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ADMIN MODULE FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin User Login
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Auth Guard    â”‚
â”‚  â€¢ Check admin role  â”‚
â”‚  â€¢ Verify 2FA (Super)â”‚
â”‚  â€¢ Session check     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ADMIN CONTROLLERS                       â”‚
â”‚                                                           â”‚
â”‚  DashboardController                                      â”‚
â”‚  â”œâ”€â”€ GET /admin/dashboard/stats                          â”‚
â”‚  â””â”€â”€ Returns: sales, revenue, users, products            â”‚
â”‚                                                           â”‚
â”‚  AnalyticsController                                      â”‚
â”‚  â”œâ”€â”€ GET /admin/analytics/sales                          â”‚
â”‚  â”œâ”€â”€ GET /admin/analytics/revenue                        â”‚
â”‚  â””â”€â”€ GET /admin/analytics/users                          â”‚
â”‚                                                           â”‚
â”‚  OrdersController                                         â”‚
â”‚  â”œâ”€â”€ GET /admin/orders                                   â”‚
â”‚  â”œâ”€â”€ GET /admin/orders/:id                               â”‚
â”‚  â””â”€â”€ PATCH /admin/orders/:id                             â”‚
â”‚                                                           â”‚
â”‚  UsersController                                          â”‚
â”‚  â”œâ”€â”€ GET /admin/users                                    â”‚
â”‚  â”œâ”€â”€ POST /admin/users/:id/ban                           â”‚
â”‚  â””â”€â”€ POST /admin/users/:id/unban                         â”‚
â”‚                                                           â”‚
â”‚  ProductsController                                       â”‚
â”‚  â”œâ”€â”€ GET /admin/products                                 â”‚
â”‚  â”œâ”€â”€ POST /admin/products/:id/approve                    â”‚
â”‚  â””â”€â”€ POST /admin/products/:id/reject                     â”‚
â”‚                                                           â”‚
â”‚  CommissionController                                     â”‚
â”‚  â”œâ”€â”€ GET /admin/commission/rules                         â”‚
â”‚  â”œâ”€â”€ POST /admin/commission/rules                        â”‚
â”‚  â””â”€â”€ PATCH /admin/commission/rules/:id                   â”‚
â”‚                                                           â”‚
â”‚  ReportsController                                        â”‚
â”‚  â”œâ”€â”€ GET /admin/reports/sales?format=pdf                 â”‚
â”‚  â””â”€â”€ GET /admin/reports/commission                       â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   ADMIN SERVICES       â”‚
           â”‚                        â”‚
           â”‚  â€¢ Query aggregation   â”‚
           â”‚  â€¢ Business rules      â”‚
           â”‚  â€¢ Audit logging       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚      DATABASE          â”‚
           â”‚  â€¢ Read analytics      â”‚
           â”‚  â€¢ Write audit logs    â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. DEPLOYMENT YAPISI

### 8.1 Single Server Deployment (MVP)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SINGLE SERVER DEPLOYMENT (MVP)                       â”‚
â”‚         Hetzner Dedicated: 8 vCPU, 32GB RAM, 500GB SSD      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    COOLIFY                             â”‚ â”‚
â”‚  â”‚                Port: 8000 (internal)                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    TRAEFIK                            â”‚  â”‚
â”‚  â”‚                  Port: 80, 443                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                                   â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚          â”‚               â”‚                â”‚                 â”‚
â”‚          â–¼               â–¼                â–¼                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚   web   â”‚     â”‚  admin  â”‚     â”‚   api   â”‚            â”‚
â”‚    â”‚ :3000   â”‚     â”‚  :3002  â”‚     â”‚  :3001  â”‚            â”‚
â”‚    â”‚ (x2)    â”‚     â”‚  (x1)   â”‚     â”‚  (x2)   â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚               â”‚               â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                         â”‚                                   â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚               â”‚                â”‚                 â”‚
â”‚         â–¼               â–¼                â–¼                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚postgres â”‚     â”‚  redis  â”‚     â”‚ elastic â”‚            â”‚
â”‚    â”‚ :5432   â”‚     â”‚  :6379  â”‚     â”‚  :9200  â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚  minio  â”‚     â”‚ worker  â”‚     â”‚prometheusâ”‚           â”‚
â”‚    â”‚ :9000   â”‚     â”‚  (x2)   â”‚     â”‚ +grafana â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                              â”‚
â”‚  Resource Allocation:                                       â”‚
â”‚  â”œâ”€â”€ Web: 1GB RAM Ã— 2                                      â”‚
â”‚  â”œâ”€â”€ Admin: 1GB RAM Ã— 1                                    â”‚
â”‚  â”œâ”€â”€ API: 2GB RAM Ã— 2                                      â”‚
â”‚  â”œâ”€â”€ Workers: 1GB RAM Ã— 2                                  â”‚
â”‚  â”œâ”€â”€ PostgreSQL: 4GB RAM                                   â”‚
â”‚  â”œâ”€â”€ Redis: 2GB RAM                                        â”‚
â”‚  â”œâ”€â”€ Elasticsearch: 2GB RAM                                â”‚
â”‚  â”œâ”€â”€ MinIO: 1GB RAM                                        â”‚
â”‚  â”œâ”€â”€ Monitoring: 2GB RAM                                   â”‚
â”‚  â””â”€â”€ System: 4GB RAM                                       â”‚
â”‚      Total: ~26GB / 32GB                                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Multi-Server Production Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MULTI-SERVER PRODUCTION                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  Load Balancer   â”‚
                         â”‚   HAProxy/Nginx  â”‚
                         â”‚  Public IP: X.X  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                        â”‚                        â”‚
         â–¼                        â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   APP NODE 1    â”‚      â”‚   APP NODE 2    â”‚    â”‚   DB NODE       â”‚
â”‚  4 vCPU, 16GB   â”‚      â”‚  4 vCPU, 16GB   â”‚    â”‚  8 vCPU, 32GB   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Web (x2)      â”‚      â”‚ â€¢ Web (x2)      â”‚    â”‚ â€¢ PostgreSQL    â”‚
â”‚ â€¢ Admin (x1)    â”‚      â”‚ â€¢ Admin (x1)    â”‚    â”‚   (Primary)     â”‚
â”‚ â€¢ API (x2)      â”‚      â”‚ â€¢ API (x2)      â”‚    â”‚                 â”‚
â”‚ â€¢ Workers (x2)  â”‚      â”‚ â€¢ Workers (x2)  â”‚    â”‚ â€¢ Redis         â”‚
â”‚                 â”‚      â”‚                 â”‚    â”‚   (Primary)     â”‚
â”‚ â€¢ Traefik       â”‚      â”‚ â€¢ Traefik       â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â€¢ Elasticsearch â”‚
                                                 â”‚                 â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
                                                          â”‚
                                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                 â”‚  STORAGE NODE     â”‚
                                                 â”‚  4 vCPU, 8GB      â”‚
                                                 â”‚  2TB HDD          â”‚
                                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                 â”‚ â€¢ MinIO           â”‚
                                                 â”‚ â€¢ Backups         â”‚
                                                 â”‚ â€¢ Logs Archive    â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Benefits:
âœ… High availability
âœ… Horizontal scaling
âœ… Database isolation
âœ… Backup separation
âœ… Load distribution

Cost: ~â‚¬100/month
```

---

## ğŸ“ Notlar

- TÃ¼m ÅŸemalar ASCII art formatÄ±nda hazÄ±rlanmÄ±ÅŸtÄ±r
- Diyagramlar Production ortamÄ± iÃ§in optimize edilmiÅŸtir
- Security ve networking detaylarÄ± dikkate alÄ±nmÄ±ÅŸtÄ±r
- Scalability gÃ¶z Ã¶nÃ¼nde bulundurulmuÅŸtur

---

**Son GÃ¼ncelleme:** Ocak 2024  
**Versiyon:** 1.0.0

